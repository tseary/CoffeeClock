
#include <LiquidCrystal.h>

// The current state of the glyph memory in the LCD (255 = unknown)
uint8_t coffeeGlyphs[] = {255, 255};

uint8_t GLYPH_DATA[10][8] = {
	{0x0F, 0x03, 0x04, 0x08, 0x10, 0x10, 0x0F, 0x00},	// empty A
	{0x1E, 0x13, 0x09, 0x05, 0x02, 0x02, 0x1C, 0x00},	// empty B

	{0x0F, 0x03, 0x04, 0x08, 0x10, 0x1F, 0x0F, 0x00},	// 1/4  A
	{0x1E, 0x13, 0x09, 0x05, 0x02, 0x1E, 0x1C, 0x00},	// 1/4  B

	{0x0F, 0x03, 0x04, 0x08, 0x1F, 0x1F, 0x0F, 0x00},	// half A
	{0x1E, 0x13, 0x09, 0x05, 0x1E, 0x1E, 0x1C, 0x00},	// half B

	{0x0F, 0x03, 0x04, 0x0F, 0x1F, 0x1F, 0x0F, 0x00},	// 3/4  A
	{0x1E, 0x13, 0x09, 0x1D, 0x1E, 0x1E, 0x1C, 0x00},	// 3/4  B

	{0x0F, 0x03, 0x07, 0x0F, 0x1F, 0x1F, 0x0F, 0x00},	// full A
	{0x1E, 0x13, 0x19, 0x1D, 0x1E, 0x1E, 0x1C, 0x00}};	// full B

// index must be 0 or 1. These map to LCD chars 0=[2,3] or 1=[4,5].
// glyph is how full the pot is, 4 = full, 0 = empty.
void loadCoffeeGlyph(LiquidCrystal& lcd, uint8_t line, uint8_t glyph) {
	if (line >= 2 || glyph > 4) return;
	if (coffeeGlyphs[line] == glyph) 		return;

	coffeeGlyphs[line] = glyph;

	// Load the selected coffee pot glyphs into the choosen memory location
	lcd.createChar(2 * line + 2, GLYPH_DATA[2 * glyph]);
	lcd.createChar(2 * line + 3, GLYPH_DATA[2 * glyph + 1]);
}
